03-cocos2dx中的设计模式-管理者模式.md
====

**动机：为管理一组相关对象的实例化和访问提供统一的接口。**

管理者使用和扩展单例模式，它们本身就是单例，并且它们可能确保它们管理的对象是唯一的。
管理者模式和“二段构建模式”一样，也没有出现在GoF的23个设计模式中

**1.应用场景:**
----

在cocos2d-x里面有大量的应用，比如单例模式中的CCTextureCache, CCSpriteFrameCache, CCAnimationCache和
CCShaderCache类。这些管理者一般被设计成单例类.<br>

为什么管理者类要设计成单例呢？因为管理者一般会采用key-value的形式来管理其它类的实例，每当需要获取一个管理者
中的实例时，只需要提供一个惟一的键值字符串就可以得到一个与之对应的惟一实例。如果允许存在多个管理者实例的话，
那么每个管理者都会维护各自的key-value pairs。这样显然就不能通过键值字符串来获得惟一对象实例了.<br>

例如，CCSpriteFrameCache类通过定制的plist文件来实例化一系列相关的CCSpriteFrame实例，然后只需要提供精灵帧的名字
就可以得到相应的CCSpriteFrame实例了。从这个意义上来说，CCSpriteFrameCache类也可以说是一个工厂类，专门负责
生产CCSpriteFrame实例。同时，如果精灵帧名字相同的话，那么获取的精灵帧实例也是相同的.<br>

**2.优缺点:**
----

* 优点：为一组相关的对象提供一个统一的全局访问点，同时可以提供一些简洁的接口来获取和操作这些对象。同时，可以优化运行时性能。 

* 缺点：由于管理者大多采用单例模式，所以，它继承了单例模式所有的缺点。

**3.游戏开发中如何运用此模式**
----

在cocos2dx游戏开发中，经常需要使用CCAnimate动作来播放动画，这些动作的创建运行时开销是比较大的，一般采用的方式都是在
node的init方法中创建好，然后retain。之后需要使用的时候直接引用此动作即可，前提是你得声明许多CCAnimate对象的弱引用。
这里，我们可以为之创建一个CCAnimateCache类，专门用来管理这些动画动作实例。这样对于游戏中经常变换状态需要更换不同的
动画时，可以从此CCAniamteCache类中获取相应动画引用，非常方便，同时可以提高游戏性能。相应的，也可以为Action创建相
应的类.<br>

但凡那些对象，在运行时创建的时间开销特别大时，而又要经常重复使用时，都可以采取此模式来提高运行时性能.<br>
