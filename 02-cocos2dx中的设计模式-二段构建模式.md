cocos2dx中的设计模式-二段构建模式
====

什么是二段构建模式
----

* 二段构建: 就是指创建对象时不是直接通过构建函数来分配内存并完成初始化操作。取而代之的是，**构造函数只负责
分配内存，而初始化的工作则由一些名为initXXX的成员方法来完成**。然后再定义一些静态类方法把这两个阶段组合
起来，完成最终对象的构建<br>

* c++中我们一般在构造函数中为对象分配内存空间然后初始化成员变量，比如我们调用了new某个东西，那么在堆上会先为
对象分配内存空间，然后调用构造函数，在构造函数中完成一些初始化的工作。而二段构建模式就是将内存空间的分配和
初始化分开来完成，然后调用一个静态方法来返回这个对象。就拿cocos2dx中的Sprite类来说吧，当我们调用
Sprite::create()的时候内部先使用new来分配内存空间，然后调用init方法来初始化一些变量的设置。所以cocos2dx
中的二段构建模式就是将**new分配内存空间和init初始化内容**分开来处理，而不是c++传统的做法在构造函数中初始化变量<br>

二段构建模式的过程代码：<br>
```
Sprite* Sprite::create()
    {
        //分配内存
        Sprite *sprite = new Sprite();
        //init初始化
        if (sprite && sprite->init())
        {
            //内存管理的工作
            sprite->autorelease();
            return sprite;
        }
        CC_SAFE_DELETE(sprite);
        return nullptr;
    }
```

* Sprite首先调用new来分配内存空间，然后调用init函数来完成初始化的工作，顺带还做了内存管理的工作，最后返回初始化好的对象.<br>

为什么要使用此模式
----

* 这里引述一下王哲的话：“*其实我们设计二段构造时首先考虑其优势而非兼容cocos2d-iphone. 初始化时会遇到图片资源不存在等异常，
而C++构造函数无返回值，只能用try-catch来处理异常，启用try-catch会使编译后二进制文件大不少，故需要init返回bool值。
Symbian, Bada SDK，objc的alloc + init也都是二阶段构造*”。<br>

* 兼容cocos2d-iphone是一个原因，另一个重要的原因是构造函数没有返回值，如果加载资源图片的时候不存在怎么办，所以初始化的工作写
在init函数中，这个函数返回的bool值用来判断是否初始化成功<br>


